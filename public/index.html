<!DOCTYPE html>
   <html lang="en">
   <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Kirshi Smart Farming - Chatbot</title>
     <link rel="stylesheet" href="styles.css">
   </head>
   <style>
    body {
     font-family: Arial, sans-serif;
     margin: 0;
     padding: 20px;
     background-color: #f4f4f4;
   }

   header {
     text-align: center;
     margin-bottom: 20px;
   }

   h1 {
     color: #333;
   }

   #chatbot-toggle {
     position: fixed;
     bottom: 20px;
     right: 20px;
     padding: 10px 20px;
     background-color: #28a745;
     color: white;
     border: none;
     border-radius: 50px;
     cursor: pointer;
   }

   #chatbot-container {
     position: fixed;
     bottom: 80px;
     right: 20px;
     width: 300px;
     max-height: 400px;
     background: white;
     border-radius: 8px;
     box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
     display: flex;
     flex-direction: column;
   }

   #chatbot-header {
     background: #28a745;
     color: white;
     padding: 10px;
     border-radius: 8px 8px 0 0;
     text-align: center;
   }

   #chatbot-messages {
     flex: 1;
     padding: 10px;
     overflow-y: auto;
   }

   #chatbot-messages .message {
     margin: 5px 0;
     padding: 8px;
     border-radius: 5px;
   }

   #chatbot-messages .user {
     background: #e0f7fa;
     text-align: right;
   }

   #chatbot-messages .bot {
     background: #f5f5f5;
     text-align: left;
   }

   #chatbot-form {
     display: flex;
     padding: 10px;
   }

   #chatbot-input {
     flex: 1;
     padding: 8px;
     border: 1px solid #ddd;
     border-radius: 4px;
   }

   #chatbot-form button {
     padding: 8px 15px;
     background: #28a745;
     color: white;
     border: none;
     border-radius: 4px;
     margin-left: 5px;
   }
   </style>
   <body>
     <header>
       <h1>Kirshi Smart Farming</h1>
     </header>
     <main>
       <section id="chatbot-section">
         <button id="chatbot-toggle">Chat with Kirshi</button>
         <div id="chatbot-container" style="display: none;">
           <div id="chatbot-header">Kirshi Chatbot</div>
           <div id="chatbot-messages"></div>
           <form id="chatbot-form">
             <input type="text" id="chatbot-input" placeholder="Ask about crops, diseases, etc." autocomplete="off">
             <button type="submit">Send</button>
           </form>
         </div>
       </section>
     </main>
     <script>
        const chatbotToggle = document.getElementById('chatbot-toggle');
   const chatbotContainer = document.getElementById('chatbot-container');
   const chatbotForm = document.getElementById('chatbot-form');
   const chatbotInput = document.getElementById('chatbot-input');
   const chatbotMessages = document.getElementById('chatbot-messages');

   chatbotToggle.addEventListener('click', () => {
     chatbotContainer.style.display = chatbotContainer.style.display === 'none' ? 'flex' : 'none';
   });

   chatbotForm.addEventListener('submit', async (e) => {
     e.preventDefault();
     const query = chatbotInput.value.trim();
     if (!query) return;

     const userMessage = document.createElement('div');
     userMessage.className = 'message user';
     userMessage.textContent = query;
     chatbotMessages.appendChild(userMessage);
     chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
     chatbotInput.value = '';

     try {
       const response = await fetch('http://localhost:3000/chat', {
         method: 'POST',
         headers: {
           'Content-Type': 'application/json',
         },
         body: JSON.stringify({ query }),
       });

       const data = await response.json();
       if (data.error) throw new Error(data.error);

       const botMessage = document.createElement('div');
       botMessage.className = 'message bot';
       botMessage.textContent = data.reply;
       chatbotMessages.appendChild(botMessage);
       chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
     } catch (error) {
       console.error('Chat error:', error);
       const errorMessage = document.createElement('div');
       errorMessage.className = 'message bot';
       errorMessage.textContent = 'Sorry, something went wrong.';
       chatbotMessages.appendChild(errorMessage);
     }
   });
     </script>
   </body>
   </html>